(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{347:function(t,s,e){"use strict";e.r(s);e(158),e(18),e(23),e(153),e(30);var a={data:function(){return{location:""}},mounted:function(){this.location=location.toString().replace(this.$localePath,"/").replace(/#.*/,"")}},n=e(15),r=Object(n.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"vuepress-plugin-redirect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vuepress-plugin-redirect"}},[t._v("#")]),t._v(" vuepress-plugin-redirect "),e("GitHubLink",{attrs:{repo:"vuepress/vuepress-community"}})],1),t._v(" "),e("p",[t._v("VuePress has a built-in "),e("a",{attrs:{href:"https://vuepress.vuejs.org/en/guide/i18n.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("i18n system"),e("OutboundLink")],1),t._v(", but you must provide a default language, otherwise you will only get a 404 if you try to access "),e("code",[t._v("/")]),t._v(" directly. However, providing a default language often means a less friendly project structure (because the files in the default language are one level lower than others), and we sometimes want our website to keep "),e("code",[t._v("/")]),t._v(" for a more intelligent redirection (e.g. determines that the language used by the user based on "),e("code",[t._v("navigator.language")]),t._v(" and automatically redirects to the corresponding page). "),e("code",[t._v("vuepress-plugin-redirect")]),t._v(" is such a plugin that handles automatic redirections. Of course, its capacity is not limited to automatic redirecting of the language, because you can redirect any page to its subpages via a custom redirector.")]),t._v(" "),e("ClientOnly",[e("p",[t._v("For example, when you type "),e("a",{attrs:{href:t.location}},[e("code",[t._v(t._s(t.location))])]),t._v(" in address bar, the page will be redirected automatically here.")])]),t._v(" "),e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -D vuepress-plugin-redirect\n")])])]),e("h2",{attrs:{id:"usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/config.js")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuepress-plugin-redirect'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// provide i18n redirection")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// it will automatically redirect `/foo/bar/` to `/:locale/foo/bar/` if exists")]),t._v("\n        locales"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("or")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/config.js")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    redirect"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      redirectors"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// customize your redirectors")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          base"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/my-plugins/'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// automatically redirect `/my-plugins/` to a subpage")]),t._v("\n          storage"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// save the result of the last visit to `localStorage` for the next redirect")]),t._v("\n          alternative"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// provide an alternate list")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// if no page was matched, you will get a "404 not found"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mathjax'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// equivalent to `/my-plugins/mathjax/`")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'migrate'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pangu'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redirect'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'serve'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"configs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configs"}},[t._v("#")]),t._v(" Configs")]),t._v(" "),e("h3",{attrs:{id:"locales"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#locales"}},[t._v("#")]),t._v(" locales")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("type:")]),t._v(" "),e("code",[t._v("boolean")])]),t._v(" "),e("li",[e("strong",[t._v("default:")]),t._v(" "),e("code",[t._v("false")])])]),t._v(" "),e("p",[t._v("Whether to provide i18n redirection.")]),t._v(" "),e("h3",{attrs:{id:"redirectors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirectors"}},[t._v("#")]),t._v(" redirectors")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("type:")]),t._v(" "),e("code",[t._v("Redirector[]")])]),t._v(" "),e("li",[e("strong",[t._v("default:")]),t._v(" "),e("code",[t._v("[]")])])]),t._v(" "),e("p",[t._v("A list of custom redirectors.")]),t._v(" "),e("h3",{attrs:{id:"redirector-base"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirector-base"}},[t._v("#")]),t._v(" redirector.base")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("type:")]),t._v(" "),e("code",[t._v("string")])]),t._v(" "),e("li",[e("strong",[t._v("default:")]),t._v(" "),e("code",[t._v("'/'")])])]),t._v(" "),e("p",[t._v("Base URL to be redirected.")]),t._v(" "),e("h3",{attrs:{id:"redirector-storage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirector-storage"}},[t._v("#")]),t._v(" redirector.storage")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("type:")]),t._v(" "),e("code",[t._v("boolean | string | Storage")])]),t._v(" "),e("li",[e("strong",[t._v("default:")]),t._v(" "),e("code",[t._v("false")])])]),t._v(" "),e("p",[t._v("Decide how the results of the redirect are stored. If set to "),e("code",[t._v("string")]),t._v(", it corresponds to the key of "),e("code",[t._v("localStorage")]),t._v(". If it is an object, you must include the following two methods:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("get(redirector: Redirector): string")])]),t._v(" "),e("li",[e("code",[t._v("set(value: string, redirector: Redirector): void")])])]),t._v(" "),e("p",[t._v("A simple "),e("code",[t._v("storage")]),t._v(" object is provided below for your reference:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" storage "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" base "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" localStorage "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" localStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redirect:'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" base "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" localStorage "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    localStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redirect:'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"redirector-alternative"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirector-alternative"}},[t._v("#")]),t._v(" redirector.alternative")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("type:")]),t._v(" "),e("code",[t._v("string | string[] | ((rel: string) => string | string[])")])]),t._v(" "),e("li",[e("strong",[t._v("default:")]),t._v(" "),e("code",[t._v("undefined")])])]),t._v(" "),e("p",[t._v("An alternate list of redirects. A requested URL will be devided into two parts, "),e("code",[t._v("base")]),t._v(" and "),e("code",[t._v("rel")]),t._v(", and "),e("code",[t._v("alternative")]),t._v(" will be inserted between them. If it is a function, "),e("code",[t._v("rel")]),t._v(" will be passed as a parameter. All the results obtained will be tried in sequence, and the first existing page will be taken for redirection.")])],1)}),[],!1,null,null,null);s.default=r.exports}}]);